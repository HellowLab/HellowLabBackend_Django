# ------------------------------------------------------------
# 192.168.86.43
# ------------------------------------------------------------

server {
  listen 80;  # Listen on IPv4
  server_name 192.168.86.43;  # Server IP Address

  # Set variables for proxying
  set $forward_scheme http;
  set $server         "django_hellowlab";
  set $port           8000;

  # Root path for serving files
  root /var/www;

  # Location block for media files
  location /media/ {
    alias /var/www/media;       # Point to the media directory
    try_files $uri $uri/ =404;  # Serve file or return 404
    autoindex on;               # Disable directory listing
  }

  # Proxy to Django Application
  location / {
    proxy_pass          $proxy_forward_scheme://$proxy_server:$proxy_port/app/media/;
    proxy_set_header    Host $host;
    proxy_set_header    X-Real-IP $remote_addr;
    proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header    X-Forwarded-Proto $scheme;
  }
}
